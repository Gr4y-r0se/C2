<head>
</head>

{% extends 'template.html' %}


{% block content %}

    <h1 class='title'>
        {% block title %} 
            Payloads
        {% endblock %}
    </h1>
        <p>Save a script below, and requests to https://{{ host }}/{{ session['identifier'] }}/serve.js will return it</br></br>
        You can also load a presaved script here: <select id="presaved" class='primary-dropdown'  name="presaved" onchange="populate(this);">
            {%for i in content%}
                <option value="{{i[1]}}">{{i[0]}}</option>
            {%endfor%}
            <option value="">--New--</option>
        </select>
    </p>
        <form method="" action="">
            <label for="scriptname" style="margin-bottom:10px;">Script Name:</label><br>
            <input class="primary-text-input-small" id="scriptname" placeholder="Script Name" name="name" value=""/>
            <input style="display: none;" id="uuid" name="uuid" value=""/>
            </br></br>
            <label for="the_script" style="margin-bottom:10px;">Script:</label><br>
            <textarea class="primary-text-input-large" onchange="document.getElementById('activate_button').innerHTML = 'Set as Active';" id="the_script" name="the_script" rows="5" cols="70" autofocus></textarea></br>
            <button class="primary-button" type="button" id="save_button" onclick="save_script()">Save</button>
            <button class='primary-button' type="button" id="activate_button" onclick="set_script_as_active()">Set as Active</button>
        </form>
        </br></br>
    
    <script src="{{ url_for('static', filename='js/scripts.js') }}">
    </script>

{% endblock %}